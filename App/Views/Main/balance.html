{% extends 'logged.html' %}

{% block title %}FillYourWallet - Dodaj wydatek{% endblock %}

{% block balance %} active {% endblock %}

{% block content %} 
<section>
    <header class = "col-12 col-md-8 offset-0 offset-md-2 balanceHeaderBlock">
        <h3 class = "text-center" id = "balanceHeader">Bilans</h3>
    </header>
    <article>
        <div class = "container">
            <div class="modal fade" id="modalDatePicker" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header text-center">
                            <h4>Wprowadź zakres dat dla bilansu</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form action = "/customBalance" method = "post">
                                <label for="beginDate">Od:</label>
                                <input type="date" class="form-control mb-3" name = "beginDate" id = "beginDate" required>
                                <label for="endDate">Do: </label>
                                <input type="date" class="form-control mb-3" name = "endDate" id = "endDate" required>
                                <button type="submit" class="btn btn-default btn-success btn-block">Pokaż bilans</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class = "row">                        
                <div class = "col-12 col-md-6 balanceTable text-center mt-2 mt-md-3">
                    <h4>Przychody</h4> 
                    {% if balance.incomeTotal is not empty%}
                        {% for value in balance.incomeTotal %}	
                        <span class = "balanceInfo col-6 float-left">{{ value['name'] }}</span>
                        <span class = "balanceInfoAmount col-6 float-right">{{ value['ROUND(SUM(incomes.amount), 2)']|number_format(2, ',', ' ') }} PLN</span>                         
                        {% endfor %}
                    {% else %}
                        <span class = "balanceInfo col-6">Brak wprowadzonych przychodów w wybranym okresie</span>
                    {% endif %}
                </div>                    
                <div class = "col-12 col-md-6 balanceTable text-center mt-2 mt-md-3">
                    <h4>Wydatki</h4>                            
                    {% if balance.expenseTotal is not empty%}
                        {% for value in balance.expenseTotal %}	
                        <span class = "balanceInfo col-6 float-left">{{ value['name'] }}</span>
                        <span class = "balanceInfoAmount col-6 float-right">{{ value['ROUND(SUM(expenses.amount), 2)']|number_format(2, ',', ' ') }} PLN</span>                          
                        {% endfor %}
                    {% else %}
                        <span class = "balanceInfo col-6">Brak wprowadzonych wydatków w wybranym okresie</span>
                    {% endif %}                  
                </div>                                       
                <div class = "col-12 col-md-8 offset-0 offset-md-2">                                               
                    <h3 class = "text-center mt-2 mb-3 mt-md-5" id = "{{balance.summaryId}}"> {{balance.balance}} PLN<br>{{balance.summaryText}}</h3>
                </div>
            </div>                    
        </div>                
    </article>
</section>
{% endblock %}